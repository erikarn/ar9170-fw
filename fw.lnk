/*
 * The ar9170 firwmare gets stuffed into the
 * device's Program RAM, which has a size of 32K.
 * We use our own linker script to customize
 * the location of expected code but also to
 * avoid running out of the allowed space.
 */
MEMORY
{
    pram : ORIGIN = 0x00000000, LENGTH = 32k
}

SECTIONS
{
	/*
	 * The ar9170 boot code will execute the code
	 * at address 0x04 from the loaded firmware as
	 * such we must ensure our starting routine
	 * is kept at that address.
	 */

	. =  0x04;

	/*
	 * This is still not putting zfbooter at 0x04 ...
	 * also note that STA needs to be changed for AP
	 */
	.zfboot_section : { STA/boot*(.text) } > pram

	/* The rest of the .text can go anywhere */
	.text	: { *(.text) } > pram
	
	/* .text	: { *(.text) _zfbooter = ABSOLUTE(0x04); } > pram */
	.text	: { *(.text) } > pram 
	.rodata : { *(.rodata*) } > pram 
	.data	: { *(.data*) } > pram
	.bss	: { *(.bss) } > pram
}
